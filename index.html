<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Falaris's Stash</title>
	<!-- initial favicon (will be replaced/restored by script) -->
	<link id="favicon" rel="icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		@font-face {
			font-family: 'Poppins';
			font-style: normal;
			font-weight: 400;
			font-display: swap;
			src: url("https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrFJA.ttf") format('truetype');
		}

		@font-face {
			font-family: 'Poppins';
			font-style: normal;
			font-weight: 500;
			font-display: swap;
			src: url("https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9V1s.ttf") format('truetype');
		}

		@font-face {
			font-family: 'Poppins';
			font-style: normal;
			font-weight: 600;
			font-display: swap;
			src: url("https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6V1s.ttf") format('truetype');
		}

		@font-face {
			font-family: 'Poppins';
			font-style: normal;
			font-weight: 700;
			font-display: swap;
			src: url("https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7V1s.ttf") format('truetype');
		}

		:root {
			--p1: #59cebf;
			--p2: #42b4ab;
			--p3: #3ac3ab;
			--p4: #20b896;
			--p5: #12ae9a;
			--bg-dark: #0D0D0D;
			--bg-card: #161616;
			--text-light: #EAEAEA;
			--text-dark: #CCCCCC;
			--border-color: #2a2a2a;
		}

		*,
		*::before,
		*::after {
			box-sizing: border-box;
		}

		body {
			font-family: 'Poppins', sans-serif;
			background-color: var(--bg-dark);
			color: var(--text-light);
			margin: 0;
			padding: 0;
			min-height: 100vh;
			overflow-x: hidden;
			position: relative;
			display: flex;
			align-items: center;
			justify-content: center;
			background-image: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(58, 195, 171, 0.2), transparent);
		}

		#stars {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			pointer-events: none;
			z-index: 0;
		}

		.star {
			position: absolute;
			width: 2px;
			height: 2px;
			background: var(--p1);
			border-radius: 50%;
			animation: twinkle 3s infinite;
		}

		@keyframes twinkle {

			0%,
			100% {
				opacity: 0.3;
				transform: scale(1);
			}

			50% {
				opacity: 1;
				transform: scale(1.5);
			}
		}

		.container {
			max-width: 600px;
			width: 90%;
			padding: 50px 40px;
			position: relative;
			z-index: 1;
			background: var(--bg-card);
			border: 1px solid var(--border-color);
			border-radius: 25px;
			backdrop-filter: blur(20px);
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
			animation: fadeIn 0.8s ease-out;
		}

		header {
			text-align: center;
			margin-bottom: 40px;
		}

		h1 {
			font-size: 3em;
			background: linear-gradient(45deg, var(--p1), var(--p3), var(--p4));
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			margin-bottom: 15px;
			font-weight: 700;
		}

		.random-message {
			color: var(--text-dark);
			font-style: italic;
			font-size: 1em;
			margin-bottom: 10px;
			min-height: 25px;
			animation: slideIn 0.5s ease-out;
		}

		@keyframes slideIn {
			from {
				opacity: 0;
				transform: translateX(-20px);
			}

			to {
				opacity: 1;
				transform: translateX(0);
			}
		}

		.toggle-container {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 15px;
			margin-bottom: 30px;
			padding: 15px;
			background: rgba(255, 255, 255, 0.05);
			border-radius: 15px;
			border: 1px solid var(--border-color);
		}

		.toggle-label {
			font-size: 1em;
			color: var(--text-dark);
			font-weight: 500;
		}

		.toggle-switch {
			position: relative;
			width: 60px;
			height: 30px;
			background: rgba(255, 255, 255, 0.1);
			border-radius: 30px;
			cursor: pointer;
			transition: all 0.3s;
			border: 2px solid var(--border-color);
		}

		.toggle-switch.active {
			background: linear-gradient(45deg, var(--p3), var(--p1));
			border-color: transparent;
		}

		.toggle-slider {
			position: absolute;
			top: 3px;
			left: 3px;
			width: 20px;
			height: 20px;
			background: #fff;
			border-radius: 50%;
			transition: all 0.3s;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
		}

		.toggle-switch.active .toggle-slider {
			transform: translateX(30px);
		}

		.cloak-container {
			text-align: center;
			margin-bottom: 30px;
			padding: 20px;
			background: rgba(89, 206, 191, 0.1);
			border-radius: 15px;
			border: 1px solid var(--p3);
		}

		.cloak-btn {
			width: 100%;
			padding: 15px 20px;
			background: linear-gradient(45deg, var(--p3), var(--p1));
			border: none;
			border-radius: 12px;
			color: var(--bg-dark);
			font-size: 1.1em;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s;
			font-family: 'Poppins', sans-serif;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
		}

		.cloak-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 20px rgba(89, 206, 191, 0.4);
		}

		.cloak-btn i {
			font-size: 1.2em;
		}

		.cloak-hint {
			margin-top: 10px;
			font-size: 0.85em;
			color: var(--text-dark);
			font-style: italic;
		}

		.dispenser-section {
			margin-bottom: 30px;
		}

		.dropdown {
			width: 100%;
			padding: 18px 20px;
			font-size: 1.2em;
			background: var(--bg-dark);
			border: 2px solid var(--border-color);
			border-radius: 15px;
			color: var(--text-light);
			cursor: pointer;
			transition: all 0.3s;
			margin-bottom: 20px;
			outline: none;
			font-weight: 500;
			font-family: 'Poppins', sans-serif;
			appearance: none;
			-webkit-appearance: none;
			-moz-appearance: none;
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2359cebf' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
			background-repeat: no-repeat;
			background-position: right 15px center;
			background-size: 20px;
			padding-right: 50px;
		}

		.dropdown:hover {
			border-color: var(--p3);
			box-shadow: 0 0 0 3px rgba(58, 195, 171, 0.3);
		}

		.dropdown:focus {
			border-color: var(--p1);
			box-shadow: 0 0 0 3px rgba(89, 206, 191, 0.3);
		}

		.dropdown option {
			background: var(--bg-dark);
			color: var(--text-light);
			padding: 15px;
			font-size: 1em;
		}

		.btn,
		.dispense-btn {
			width: 100%;
			padding: 20px;
			font-size: 1.3em;
			font-weight: 600;
			background: var(--text-light);
			color: var(--bg-dark);
			border: none;
			border-radius: 15px;
			cursor: pointer;
			transition: all 0.3s ease;
			text-transform: uppercase;
			letter-spacing: 2px;
			position: relative;
			overflow: hidden;
			font-family: 'Poppins', sans-serif;
		}

		.btn:hover,
		.dispense-btn:hover {
			background: var(--p1);
			transform: translateY(-2px);
			box-shadow: 0 4px 15px rgba(89, 206, 191, 0.2);
		}

		.btn:active,
		.dispense-btn:active {
			transform: translateY(-1px);
		}

		.result-box {
			margin-top: 25px;
			padding: 20px;
			background: var(--bg-dark);
			border: 2px solid var(--p3);
			border-radius: 12px;
			min-height: 80px;
			display: none;
			animation: popIn 0.4s ease-out;
		}

		.result-box.show {
			display: block;
		}

		@keyframes popIn {
			0% {
				opacity: 0;
				transform: scale(0.8);
			}

			100% {
				opacity: 1;
				transform: scale(1);
			}
		}

		.result-label {
			color: var(--p1);
			font-size: 0.9em;
			text-transform: uppercase;
			letter-spacing: 1px;
			margin-bottom: 10px;
			font-weight: 600;
		}

		.result-link {
			color: var(--text-light);
			font-size: 1.1em;
			word-break: break-all;
			text-decoration: none;
			display: block;
			padding: 10px;
			background: rgba(255, 255, 255, 0.05);
			border-radius: 8px;
			transition: all 0.3s;
		}

		.result-link:hover {
			background: rgba(255, 255, 255, 0.1);
			color: var(--p1);
		}

		.report-section {
			margin-top: 20px;
			padding: 20px;
			background: rgba(255, 100, 100, 0.1);
			border: 2px solid rgba(255, 100, 100, 0.3);
			border-radius: 12px;
			display: none;
		}

		.report-section.show {
			display: block;
			animation: popIn 0.4s ease-out;
		}

		.report-title {
			color: #ff6464;
			font-size: 1.1em;
			font-weight: bold;
			margin-bottom: 15px;
			text-transform: uppercase;
			letter-spacing: 1px;
		}

		.report-input,
		.report-textarea {
			width: 100%;
			padding: 12px;
			margin-bottom: 15px;
			background: var(--bg-dark);
			border: 1px solid var(--border-color);
			border-radius: 8px;
			color: var(--text-light);
			font-size: 1em;
			outline: none;
			transition: all 0.3s;
			font-family: 'Poppins', sans-serif;
		}

		.report-textarea {
			resize: vertical;
			min-height: 80px;
		}

		.report-input:focus,
		.report-textarea:focus {
			border-color: #ff6464;
			box-shadow: 0 0 15px rgba(255, 100, 100, 0.3);
		}

		.report-btn {
			width: 100%;
			padding: 15px;
			background: linear-gradient(45deg, #ff4444, #ff6464);
			border: none;
			border-radius: 10px;
			color: #fff;
			font-size: 1.1em;
			font-weight: bold;
			cursor: pointer;
			transition: all 0.3s;
			text-transform: uppercase;
			letter-spacing: 1px;
			font-family: 'Poppins', sans-serif;
		}

		.report-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 25px rgba(255, 100, 100, 0.4);
		}

		.report-link-btn {
			margin-top: 15px;
			padding: 12px 20px;
			background: rgba(255, 100, 100, 0.2);
			border: 1px solid rgba(255, 100, 100, 0.4);
			border-radius: 8px;
			color: #ff6464;
			font-size: 0.95em;
			cursor: pointer;
			transition: all 0.3s;
			width: 100%;
			text-align: center;
			font-family: 'Poppins', sans-serif;
			font-weight: 500;
		}

		.report-link-btn:hover {
			background: rgba(255, 100, 100, 0.3);
			border-color: #ff6464;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@media (max-width: 768px) {
			.container {
				padding: 30px 20px;
			}

			h1 {
				font-size: 2.5em;
			}

			.dropdown,
			.dispense-btn {
				font-size: 1em;
				padding: 15px;
			}
		}
	</style>
</head>

<body>
	<div id="stars"></div>

	<div class="container">
		<header>
			<h1>Falaris's Stash</h1>
			<div class="random-message" id="randomMessage"></div>
		</header>

		<div class="toggle-container">
			<span class="toggle-label">Open in about:blank</span>
			<div class="toggle-switch" id="toggleSwitch" onclick="toggleBlankMode()">
				<div class="toggle-slider"></div>
			</div>
		</div>

		<div class="cloak-container">
			<button class="cloak-btn" onclick="cloakTab()">
                <i class="fas fa-mask"></i> Cloak My Ass
            </button>
			<p class="cloak-hint">Disguise this tab as Infinite Campus</p>
		</div>

		<div class="dispenser-section">
			<select class="dropdown" id="categorySelect">
                <option value="petezah">Petezah</option>
                <option value="science">Definitely Science</option>
                <option value="flarelink">Flarelink</option>
                <option value="pulsar">Pulsar</option>
                <option value="frogie">Frogies arcade</option>
                <option value="sample">Sample Category</option>
            </select>

			<button class="dispense-btn" onclick="dispenseLink()">Dispense Link</button>

			<div class="result-box" id="resultBox">
				<div class="result-label">Your Link:</div>
				<a class="result-link" id="resultLink" href="#" target="_blank"></a>
				<button class="report-link-btn" onclick="toggleReportForm()">Report Broken/Blocked Link</button>
			</div>

			<div class="report-section" id="reportSection">
				<div class="report-title">Report Link Issue</div>
				<input type="text" class="report-input" id="reportLink" placeholder="Link URL" readonly>
				<input type="text" class="report-input" id="reportCategory" placeholder="Category" readonly>
				<textarea class="report-textarea" id="reportReason" placeholder="Describe the issue (e.g., blocked, broken, not loading...)"></textarea>
				<button class="report-btn" onclick="sendReport()">Send Report via Email</button>
			</div>
		</div>
	</div>

	<script>
		/* ---------- data ---------- */
        const linkCategories = {
            petezah: [
                "https://gatekeepfromkrithiknimmagadasincehesmyopp.atamanco.eu",
                "https://gatekeepthisfr.atamanco.eu",
                "https://iknowyouhaveacrushonme.atamanco.eu",
                "https://krithiknimmagadagoestodoughertyvalleyhighschoollivesinsanramon.atamanco.eu",
                "https://shreyesmedidiisthegoatfrfr.atamanco.eu",
                "https://advancedchemistry.atamanco.eu",
                "https://linewize.com.atamanco.eu",
                "https://linkforarjundasigma.atamanco.eu",
                "https://precalculus.atamanco.eu",
                "https://securly.com.atamanco.eu"
            ],
            science: [
                "https://platform.geometrylesson.com/",
                "https://Ed.supermathschool.com",
                "https://tl.friv-2026.com/"
            ],
            flarelink: [
                "https://jayesh.googledrive.icu.cdn.cloudflare.net/",
                "https://advancedcalculus.ghostnation.org/",
                "https://1pklvm.prodigy.it.com.cdn.cloudflare.net/",
                "https://vq5skfeq.googledrive.icu.cdn.cloudflare.net/",
                "https://xd8rs5ix.tb.googledrive.icu.cdn.cloudflare.net/"
            ],
            pulsar: [
                "https://pulsar-site.netlify.app/",
                "https://whatintheofficial.netlify.app/",
                "https://officialgreatsite.netlify.app/",
                "https://pulsariscool.netlify.app/",
                "https://greatsitetouse.netlify.app/"
            ],
            frogie: [
                "https://a.a.d.i.t.hasacrushon.f.a.l.a.r.i.s.lol.atamanco.eu",
                "https://if-you-block-this-you-cancelled.yourmom.sigmasubscription.atamanco.eu",
                "https://k.r.i.t.h.i.k-im-watching-you.atamanco.eu",
                "https://k.r.i.t.h.i.k.lol.acceleratedalgebra2.atamanco.eu",
                "https://medidi.lol.atamanco.eu"
            ],
            sample: [
                "https://example.com/sample1",
                "https://example.com/sample2",
                "https://example.com/sample3"
            ]
        };

        const randomMessages = [
            "krithik my #1 opp",
            "why'd Google docs misspell my name :sob:",
            "ajh's vault skibidi?!",
            "smoresxo ripoff",
            "quick, close the tab! There's a teacher coming!",
            "gatekeep this fr",
            "don't share with krithik",
            "skibidi skibidi"
        ];

        /* ---------- UI helpers ---------- */
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 100;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                starsContainer.appendChild(star);
            }
        }

        function displayRandomMessage() {
            const messageElement = document.getElementById('randomMessage');
            const randomMsg = randomMessages[Math.floor(Math.random() * randomMessages.length)];
            messageElement.textContent = randomMsg;
        }

        /* ---------- state ---------- */
        let useBlankMode = false;
        let currentLink = '';
        let currentCategory = '';

        /* ---------- toggle about:blank mode ---------- */
        function toggleBlankMode() {
            useBlankMode = !useBlankMode;
            const toggle = document.getElementById('toggleSwitch');
            toggle.classList.toggle('active');
        }

        /* ---------- report form ---------- */
        function toggleReportForm() {
            const reportSection = document.getElementById('reportSection');
            reportSection.classList.toggle('show');

            // populate fields with current link and category
            document.getElementById('reportLink').value = currentLink || '';
            document.getElementById('reportCategory').value = currentCategory || '';
        }

        function sendReport() {
            const link = document.getElementById('reportLink').value;
            const category = document.getElementById('reportCategory').value;
            const reason = document.getElementById('reportReason').value;

            if (!reason.trim()) {
                alert('Please describe the issue before sending the report.');
                return;
            }

            const subject = encodeURIComponent("Falaris's Stash - Link Report");
            const body = encodeURIComponent(
                `Link Issue Report\n\n` +
                `Category: ${category}\n` +
                `Link: ${link}\n\n` +
                `Issue Description:\n${reason}\n\n` +
                `---\n` +
                `Reported from Falaris's Stash`
            );

            // use the prefilled email address
            window.location.href = `mailto:srvusd-head-admin-user@students.srvusd.net?subject=${subject}&body=${body}`;

            // clear form and close
            document.getElementById('reportReason').value = '';
            document.getElementById('reportSection').classList.remove('show');
        }

        /* ---------- dispensing links ---------- */
        function dispenseLink() {
            const category = document.getElementById('categorySelect').value;
            const links = linkCategories[category];

            if (!links || links.length === 0) {
                alert('No links available in this category!');
                return;
            }

            const randomLink = links[Math.floor(Math.random() * links.length)];
            currentLink = randomLink;
            currentCategory = category;

            const resultBox = document.getElementById('resultBox');
            const resultLink = document.getElementById('resultLink');

            resultLink.href = randomLink;
            resultLink.textContent = randomLink;
            resultBox.classList.add('show');

            if (useBlankMode) {
                // open in about:blank and inject an iframe that fills the window
                const win = window.open('about:blank');
                if (!win) {
                    alert('Popup blocked. Please allow popups for this site to use about:blank mode.');
                    return;
                }

                // set a minimal loading UI until iframe loads
                try {
                    win.document.title = 'Loading...';
                    win.document.body.style.margin = "0";
                    win.document.body.style.background = "#000";

                    const iframe = win.document.createElement('iframe');
                    iframe.style.width = "100%";
                    iframe.style.height = "100%";
                    iframe.style.border = "none";
                    iframe.style.position = "fixed";
                    iframe.style.top = "0";
                    iframe.style.left = "0";
                    iframe.src = randomLink;
                    win.document.body.appendChild(iframe);
                } catch (e) {
                    // if cross-origin or blocked, fallback to direct open
                    window.open(randomLink, '_blank');
                }
            } else {
                window.open(randomLink, '_blank');
            }
        }

        /* ---------- cloak toggle (title + favicon) ---------- */
        (function setupCloak() {
            // cloak favicon URL (Infinite Campus)
            const CLOAK_FAVICON = 'favicon2.ico';

            // save original title
            const originalTitle = document.title;

            // find existing favicon link (common rels) or create one
            let faviconEl = document.querySelector("link[rel='icon'], link[rel='shortcut icon']");
            if (!faviconEl) {
                faviconEl = document.createElement('link');
                faviconEl.id = 'favicon';
                faviconEl.rel = 'icon';
                faviconEl.href = 'favicon.ico';
                document.head.appendChild(faviconEl);
            }

            // store original href (string)
            const originalFaviconHref = faviconEl.href || (location.origin + '/favicon.ico');

            // cloak state
            let isCloaked = false;

            // expose function
            window.cloakTab = function () {
                const cloakBtn = document.querySelector('.cloak-btn');
                const hint = document.querySelector('.cloak-hint');

                if (!isCloaked) {
                    // apply cloak
                    document.title = 'Infinite Campus';
                    // add cache-buster so browsers refresh the icon
                    faviconEl.href = CLOAK_FAVICON + '?v=' + Date.now();
                    cloakBtn.innerHTML = '<i class="fas fa-mask"></i> Uncloak';
                    cloakBtn.setAttribute('aria-pressed', 'true');
                    hint.textContent = 'Tab cloaked as Infinite Campus — click again to uncloak.';
                    isCloaked = true;
                } else {
                    // restore
                    document.title = originalTitle;
                    faviconEl.href = originalFaviconHref + '?v=' + Date.now();
                    cloakBtn.innerHTML = '<i class="fas fa-mask"></i> Cloak My Ass';
                    cloakBtn.setAttribute('aria-pressed', 'false');
                    hint.textContent = 'Disguise this tab as Infinite Campus';
                    isCloaked = false;
                }
            };
        })();

        /* ---------- init ---------- */
        createStars();
        displayRandomMessage();
	</script>
</body>

</html>
